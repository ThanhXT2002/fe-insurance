<section class="py-20 bg-third">
  <div class="container-layer">
    <div class="flex__middle flex-col gap-10">
      <div>
        <app-section-intro
          introClass="flex__middle flex-col text-center max-w-5xl"
          title="BÀI VIẾT / TIN TỨC"
          firstText="Tin Tức & Mẹo Bảo Hiểm Mới Nhất"
          description="Cập nhật thông tin mới nhất về tin tức và mẹo bảo hiểm. Từ những lời khuyên chuyên gia về lựa chọn gói bảo hiểm đến các cập nhật quan trọng trong ngành, chúng tôi cung cấp những kiến thức giá trị giúp bạn đưa ra quyết định đúng đắn."
          descriptionClass="text-center"
        />
      </div>
      <div class="w-full">
        <!-- Featured Posts Layout: 1 large + 2 small -->
        @if (featuredPosts().length >= 3) {
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-12">
            <!-- Main Featured Post (Left Side) -->
            <article
              routerLink="/blog/{{ featuredPosts()[0].slug }}"
              class="relative group h-96 lg:w-full lg:h-auto lg:aspect-[5/4] overflow-hidden rounded-common bg-white shadow-lg hover:shadow-2xl transition-all duration-500"
            >
              <div
                class="relative h-full w-full overflow-hidden image-hover-effect"
              >
                <img
                  [src]="featuredPosts()[0].thumbnails[0]"
                  [alt]="featuredPosts()[0].title"
                  class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
                  loading="lazy"
                />

                <div
                  class="absolute bottom-0 left-0 right-0 p-4 text-white z-10 w-full backdrop-blur-lg"
                >
                  <!-- Meta info -->
                  <div class="mb-2">
                    <i class="far fa-calendar-alt mr-1"></i>
                    {{ formatDate(featuredPosts()[0].published_at) }}
                  </div>

                  <!-- Title -->
                  <h2 class="lg:text-xl font-bold mb-1 leading-tight">
                    <a
                      routerLink="/blog/{{ featuredPosts()[0].slug }}"
                      class="hover:text-secondary transition-colors duration-200"
                    >
                      {{ featuredPosts()[0].title }}
                    </a>
                  </h2>

                  <!-- Excerpt -->
                  <p class="text-sm leading-relaxed mb-4 line-clamp-2">
                    {{ truncateText(featuredPosts()[0].excerpt, 150) }}
                  </p>

                  <hr class="border border-gray-300/30 w-full mb-4" />
                  <button
                    routerLink="/blog/{{ featuredPosts()[0].slug }}"
                    class="group-hover:text-secondary font-bold custom-btn transition-colors duration-300 md:pb-0"
                  >
                    Đọc thêm
                    <i
                      class="fa-solid fa-arrow-right -rotate-45 group-hover:rotate-0 transition-all duration-300 ease-in-out ml-2"
                    ></i>
                  </button>
                </div>
              </div>
            </article>

            <!-- Secondary Posts (Right Side) -->
            <div class="flex flex-col gap-6 lg:gap-3 lg:pt-3">
              @for (
                post of featuredPosts().slice(1, 3);
                track post.id;
                let i = $index
              ) {
               <div class="h-full">
                <app-item-post
                 [post]="post"
               />
               </div>

              }
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</section>
